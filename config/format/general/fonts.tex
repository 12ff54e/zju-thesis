\newcommand{\FangSongFontName}{FangSong}

% ctex package stores one of "windows", "mac", and "fandol" in \g__ctex_fontset_tl
\ifthenelse{\equal{\csname g__ctex_fontset_tl\endcsname}{mac}}
{
    % macOS

    % FangSong
    %   Use system default fangsong font, no need for additional installation
    \renewcommand{\FangSongFontName}{STFangsong}

    % SongTi
    %   Fix songti font invocation in `ctex` package on MacOS old version, to enable bold font
    %   Detailes in: https://github.com/TheNetAdmin/zjuthesis/issues/48
    %   Similar implementation: https://github.com/xueruini/thuthesis/blob/a86b0824da527268645571cc5fe3096d65a665b3/thuthesis.dtx#L1447-L1461
    \setCJKfamilyfont{zhsong}{Songti SC}
    \renewcommand*{\songti}{\CJKfamily{zhsong}}
    }
    {}
    
\setCJKmainfont[AutoFakeBold={4}]{\FangSongFontName}
\setCJKfamilyfont{zhfs}{\FangSongFontName}[AutoFakeBold={4}]
\setCJKfamilyfont{zhhei}{SimHei}[AutoFakeBold={4}]
\setCJKfamilyfont{zhsong}{SimSun}[AutoFakeBold={4}]

\setmainfont{Times New Roman}
\renewcommand{\bibfont}{\zihao{5}\songti}
